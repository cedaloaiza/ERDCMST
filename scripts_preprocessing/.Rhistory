setwd("~/git/ERDCMST/scripts_preprocessing")
nombreArchivo <- "files/spain_locs.csv"
points <- read.csv(nombreArchivo, header=TRUE, sep=",",
row.names=NULL)
points$ID <- NULL
points$NAME <- NULL
writePointsSin <- function(writingPoints){
#fileConn<-file("output.txt", "a")
fileConn<-file("spainNormIds.txt", "a")
for (i in 1:nrow(writingPoints)) {
line <- paste0(i-1,",",writingPoints[i,1],",",writingPoints[i,2])
#print(writingPoints[i,1])
write(line, fileConn)
}
close(fileConn)
}
writePointsSin <- function(writingPoints){
#fileConn<-file("output.txt", "a")
fileConn<-file("files/spainNormIds.txt", "a")
for (i in 1:nrow(writingPoints)) {
line <- paste0(i-1,",",writingPoints[i,1],",",writingPoints[i,2])
#print(writingPoints[i,1])
write(line, fileConn)
}
close(fileConn)
}
writePoints(points)
writePointsSin(points)
nombreArchivo <- "files/spainNormIds.csv"
points <- read.csv(nombreArchivo, header=TRUE, sep=",",
row.names=NULL)
setwd("~/git/ERDCMST/scripts_preprocessing")
nombreArchivo <- "files/spainNormIds.txt"
points <- read.csv(nombreArchivo, header=TRUE, sep=",",
row.names=NULL)
#points <- points[1:300,]
points$ID <- NULL
points$NAME <- NULL
points <- points[1:20,]
points$ID <- NULL
points$NAME <- NULL
View(points)
nombreArchivo <- "files/spainNormIds.txt"
points <- read.csv(nombreArchivo, header=TRUE, sep=",",
row.names=NULL)
points <- points[1:300,]
points$ID <- NULL
points$NAME <- NULL
points
points <- read.csv(nombreArchivo, header=TRUE, sep=",",
row.names=NULL)
points$ID <- NULL
points$NAME <- NULL
points <- points[1:20,]
points
distances <- dist(points)
distM <- as.matrix(distances)
distM <- round(distM, 5)
initialCost <- sum(distM[1,])
initialCost
library("igraph")
g <-graph_from_adjacency_matrix(distM, mode="undirected", weighted=T)
installed.packages(igraph)
installed.packages("igraph")
install.packages("igraph")
#head(distM)
library("igraph")
g <-graph_from_adjacency_matrix(distM, mode="undirected", weighted=T)
max(distM[1,])
mstR <- mst(g)
sum(E(mstR)$weight)
mstR
write_graph(mstR, "mst_small", format = "pajek")
removing <- c()
lambda <- 0.9
for (i in 1:length(dists)) {
if(dists[i] > lambda) {
removing <- c(removing, i)
}
}
dists <- distances(mstR, v=1)
max(dists)
sum(E(mstR)$weight)
max(distM[1,])
removing <- c()
lambda <- 0.8
for (i in 1:length(dists)) {
if(dists[i] > lambda) {
removing <- c(removing, i)
}
}
removing
dists
distance_table(mstR)
distances(mstR, v=1, to=1)
distances(mstR, v=1, to=2)
distances(mstR, v=1, to=3)
reconnectingCost <- sum(distM[1,removing])
newMST <- delete_vertices(mstR, removing)
newMST
mstR
removing
mstCostAfterRemove
mstCostAfterRemove <- sum(E(newMST)$weight)
mstCostAfterRemove
mstReconnected <- mstCostAfterRemove + reconnectingCost
mstReconnected
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
length(removing)
for (i in removing) {
write(paste(1, i, distM[1,i]), edgelistFileConn)
}
close(edgelistFileConn)
write_graph(newMST, "edgelists_reapired_mst_spain_complete_remaining", format = "pajek")
# edges <- get.edgelist(newMST)
# nrow(edges)
# for (i in 1:nrow(edges)) {
#   #print(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
#   write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
# }
# close(edgelistFileConn)
newMST
write_graph(newMST, "edgelists_reapired_mst_spain_complete_remaining", format = "pajek")
write_graph(newMST, "edgelists_reapired_mst_spain_complete_remaining", format = "edgelist")
V(newMST)
write_graph(newMST, "edgelists_reapired_mst_spain_complete_remaining", format = "pajek")
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
#print(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
close(edgelistFileConn)
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
#print(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
close(edgelistFileConn)
for (i in 1:nrow(edges)) {
print(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
edges[1,1]
edges[2,1]
edges[3,1]
edges[4,1]
for (i in 1:nrow(edges)) {
print(paste0(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
for (i in 1:nrow(edges)) {
print(i)
#print(paste0(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
for (i in 1:nrow(edges)) {
print(i)
print(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
nrow(edges)
for (i in 1:nrow(edges)) {
print(i)
print(paste(edges[i,1], edges[i,2]))#, distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
nrow(edges)
for (i in 1:nrow(edges)) {
print(i)
print(paste(edges[i,1], edges[i,2]))#, distM[strtoi(edges[i,1]),strtoi(edges(i,2))]))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
for (i in 1:nrow(edges)) {
print(distM[strtoi(edges[i,1]),strtoi(edges(i,2))])
print(paste(edges[i,1], edges[i,2]))#, ))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
for (i in 1:nrow(edges)) {
print(distM[as.numeric(edges[i,1]),as.numeric(edges(i,2))])
print(paste(edges[i,1], edges[i,2]))#, ))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
for (i in 1:nrow(edges)) {
print(distM[as.numeric(edges[i,1]),as.numeric(edges(i,2))])
print(paste(edges[i,1], edges[i,2]))#, ))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
for (i in 1:nrow(edges)) {
print(distM[i,1])
print(distM[as.numeric(edges[i,1]),as.numeric(edges(i,2))])
print(paste(edges[i,1], edges[i,2]))#, ))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
as.numeric(edges[1,2])
for (i in 1:nrow(edges)) {
x <- as.numeric(edges[i,1])
y <- as.numeric(edges(i,2))
print(distM[x,y])
print(paste(edges[i,1], edges[i,2]))#, ))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
x <- as.numeric(edges[i,1])
y <- as.numeric(edges(i,2))
print(distM[edges[i,1],edges[i,2]])
print(paste(edges[i,1], edges[i,2]))#, ))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
write(paste(edges[i,1], edges[i,2], distM[edges[i,1],edges(i,2)]), edgelistFileConn)
}
close(edgelistFileConn)
nrow(edges)
for (i in 1:nrow(edges)) {
x <- as.numeric(edges[i,1])
y <- as.numeric(edges(i,2))
print(distM[edges[i,1],edges[i,2]])
#print(paste(edges[i,1], edges[i,2]))#, ))
#write(paste(edges[i,1], edges[i,2], distM[strtoi(edges[i,1]),strtoi(edges(i,2))]), edgelistFileConn)
}
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
#x <- as.numeric(edges[i,1])
#y <- as.numeric(edges(i,2))
#print()
#print(paste(edges[i,1], edges[i,2]))#, ))
write(paste(edges[i,1], edges[i,2], distM[edges[i,1],edges[i,2]]), edgelistFileConn)
}
close(edgelistFileConn)
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
#x <- as.numeric(edges[i,1])
#y <- as.numeric(edges(i,2))
#print()
#print(paste(edges[i,1], edges[i,2]))#, ))
write(paste(edges[i,1], edges[i,2], distM[edges[i,1],edges[i,2]]), edgelistFileConn)
}
close(edgelistFileConn)
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
#x <- as.numeric(edges[i,1])
#y <- as.numeric(edges(i,2))
#print()
#print(paste(edges[i,1], edges[i,2]))#, ))
write(paste(edges[i,1], edges[i,2], distM[edges[i,1],edges[i,2]]), edgelistFileConn)
}
distM[5,15]
distM[13,14]
distM[8,18]
newMST
mstR
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
length(removing)
for (i in removing) {
write(paste(1, i, distM[1,i]), edgelistFileConn)
}
close(edgelistFileConn)
#write_graph(newMST, "edgelists_reapired_mst_spain_complete_remaining", format = "pajek")
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
#x <- as.numeric(edges[i,1])
#y <- as.numeric(edges(i,2))
#print()
#print(paste(edges[i,1], edges[i,2]))#, ))
write(paste(edges[i,1], edges[i,2], distM[edges[i,1],edges[i,2]]), edgelistFileConn)
}
close(edgelistFileConn)
edgelistFileConn = file("edgelists_reapired_mst_spain_complete", "a")
length(removing)
for (i in removing) {
write(paste(1, i, distM[1,i]), edgelistFileConn)
}
#close(edgelistFileConn)
#write_graph(newMST, "edgelists_reapired_mst_spain_complete_remaining", format = "pajek")
edges <- get.edgelist(newMST)
nrow(edges)
for (i in 1:nrow(edges)) {
#x <- as.numeric(edges[i,1])
#y <- as.numeric(edges(i,2))
#print()
#print(paste(edges[i,1], edges[i,2]))#, ))
write(paste(edges[i,1], edges[i,2], distM[edges[i,1],edges[i,2]]), edgelistFileConn)
}
close(edgelistFileConn)
